<html lang="en" style="min-height:100vh" data-reactroot=""><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>docs/ADRs/ADR-005-esm-distribution.md</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/></head><body style="min-height:100vh"><div style="min-height:75vh;padding-bottom:20px"><div class="container" style="border:none;border-radius:0;background-color:#000;min-height:60px;margin-bottom:0;width:100%;padding-right:5px;padding-left:5px"><div class="row col-md-12" style="width:100%;padding-top:10px;padding-right:0px;padding-left:25px"><h3 class="col-md-4" style="text-align:left;padding-right:0px;padding-bottom:20px;color:#fff">Morty-Docs</h3></div></div><div class="container"><h2 id="adr-005---esm-distribution"><a href="#adr-005---esm-distribution">ADR 005 - ESM Distribution</a></h2>
<h3 id="context"><a href="#context">Context</a></h3>
<p>We want to use Lrud as a <code>tap-static</code> module, which requires converting to <code>amd</code> format. To do so we use <code>esm-2-amd</code>, which means we need to distribute lrud as ESM. Currently it's not possible as it's only built to CJS.</p>
<h3 id="decision"><a href="#decision">Decision</a></h3>
<p>The distribution folder structure will change with two subfolders, <code>cjs</code> and <code>esm</code>. The type definitions will also be distributed in another subfolder, <code>types</code>. Rollup will still be used to create the CJS and ESM format.</p>
<h3 id="status"><a href="#status">Status</a></h3>
<p>Approved</p>
<h3 id="consequences"><a href="#consequences">Consequences</a></h3>
<p>The final distribution size will increase.</p>
<p>This change won't affect how current users consume lrud, as the package <code>main</code> is updated to point to the CJS min file.</p></div></div><footer style="bottom:0;width:100%;background-color:#f5f5f5;padding:0 15px;box-sizing:border-box;min-height:25vh;position:relative" class="footer"><div style="padding:1em 0 2em 0" class="container"><div class="row"><div style="text-align:center" class="col-md-4 col-md-offset-4"><h3>What is Morty-Docs?</h3><p>Link to <a href="https://github.com/bbc/morty-docs">Morty-docs</a>.</p></div></div></div></footer></body></html>